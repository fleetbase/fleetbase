{
	frankenphp {
		# Reduced from 24 to 20 for better resource management
		# With 4 containers: 20 Ã— 4 = 80 total workers
		# Requires db.t3.large (591 max connections) or better
		num_threads 20
	}
	order php_server before file_server
}

http://:8000 {
	root * /fleetbase/api/public
	encode zstd br gzip
	
	# Request timeouts to prevent hanging
	timeouts {
		read_body 10s
		read_header 5s
		write 60s
		idle 120s
	}
	
	php_server {
		resolve_root_symlink
	}
}