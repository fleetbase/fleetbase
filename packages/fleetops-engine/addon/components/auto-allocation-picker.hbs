{{#if this.isAutoAllocationEnabled}}
<DropdownButton
    @text="Auto Allocate"
    @img="/images/auto-allocation.svg"
    @imgClass="h-4 w-4 mr-2"
    @type="magic"
    @size="sm"
    @buttonWrapperClass="mr-2"
    as |dd|
>
    <div class="filters-dropdown-container w-auto">
        <div class="filters-dropdown-header">
            <h4>{{t "fleet-ops.common.auto-allocate"}}</h4>
        </div>
        <div class="filters-dropdown-body">
            <div class="flex flex-row gap-4 mb-6 fleetbase-power-select">
                <div class="relative inline-block">
                    <DatePicker
                        @value={{this.autoAllocationDate}}
                        @onSelect={{@onSelectDate}}
                        @placeholder={{t "fleet-ops.common.select-date-range"}}
                        @range={{true}}
                        @minDate={{this.minDate}}
                        class="form-input-sm caret-gray-800"
                        style="color: transparent; caret-color: transparent;"
                        readonly
                    />
                    <span class="pointer-events-none absolute inset-0 flex items-center px-3 pr-10 whitespace-nowrap overflow-hidden text-ellipsis text-gray-800 text-sm">
                        {{if this.formattedDateRange this.formattedDateRange @placeholder}}
                    </span>
                    <!-- Calendar icon positioned on the right side -->
                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                        <img src="/images/calendar.svg" alt="Calendar" class="h-4 w-4 opacity-60" />
                    </div>
                </div>
                <PowerSelect
                    @options={{this.fleetOptions}}
                    @selected={{this.selectedFleet}}
                    @onChange={{@onSelectFleet}}
                    @placeholder={{t "fleet-ops.operations.orders.index.new.select-fleet"}}
                    @triggerClass="form-select form-input form-input-sm"
                    as |fleet|
                >
                    {{fleet.label}}
                </PowerSelect>
            </div>
        </div>
        <div class="filters-dropdown-footer space-x-2 flex justify-center">
            <Button
                @text={{t "fleet-ops.common.allocate-now"}}
                @type="primary"
                class="w-full text-lg font-semibold bg-black text-white"
                @onClick={{dropdown-fn dd this.allocate}}
                {{!-- @disabled={{not this.hasDate}} --}}
                @disabled={{not this.canAllocate}}
            />
        </div>
    </div>
</DropdownButton>
{{/if}}
